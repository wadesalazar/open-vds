## SEGYImport

A tool to scan and import a SEG-Y file to a volume data store (VDS).

Usage:
```
SEGYImport [OPTION...] <input file>
```

| Option  | Decription |
|---------|------------|
| -h, --header-format \<file>       | A JSON file defining the header format for the input SEG-Y file. The expected format is a dictonary of strings (field names) to pairs (byte position, field width) where field width can be "TwoByte" or "FourByte". Additionally, an "Endianness" key can be specified as "BigEndian" or "LittleEndian". |
| -p, --primary-key \<field>        | The name of the trace header field to use as the primary key. (default: Inline) |
| -s, --secondary-key \<field>      | The name of the trace header field to use as the secondary key. (default: Crossline) |
|     --scale \<value>              | If a scale override (floating point) is given, it is used to scale the coordinates in the header instead of determining the scale factor from the coordinate scale trace header field. |
| -l, --little-endian               | Force little-endian header fields. |
|     --scan                        | Generate a JSON file containing information about the input SEG-Y file. |
| -i, --file-info \<file>           | A JSON file (generated by the --scan option) containing information about the input SEG-Y
file. |
| -b, --brick-size \<value>         | The brick size for the volume data store. (default: 64)
| -f, --force                       | Continue on upload error.
|     --ignore-warnings             | Ignore warnings about import parameters.
|     --url \<string>               | Url for the target destination for the VDS
|     --connection \<string>        | Connection string for the target destination for the VDS
|     --sourceUrl \<string>         | Url for the source input 
|     --sourceConnection \<string>  | Connection source input
|     --persistentID \<ID>          | A globally unique ID for the VDS, usually an 8-digit hexadecimal number.
|     --uniqueID                    | Generate a new globally unique ID when scanning the input SEG-Y file.

For more information about the ``--url`` and ``--connection`` parameter please see:
http://osdu.pages.community.opengroup.org/platform/domain-data-mgmt-services/seismic/open-vds/connection.html

To create a valid VDS from a SEG-Y file, SEGYImport needs to scan the file to
determine the extents of the dataset (e.g. number of samples, number of
crosslines, number of inlines). During the scanning process we read from a
number of fields in the trace headers, most importantly the primary and
secondary keys that are used as the axes of the VDS. 

For inline-sorted poststack data the inline number is the primary key and the
crossline number is the secondary key (this is the default setting). If these
are not in the 'standard' byte locations in the header, you can override the
trace header format using a JSON file that contains definitions of the SEG-Y
header fields (that are not in the standard locations) using the
--header-format command line option. You can also specify the header field
endianness in this file. This is an example of such a JSON file:

```
{
  "Endianness": "BigEndian",
  "InlineNumber":    [ 5, "FourByte"],
  "CrosslineNumber": [ 9, "FourByte"]
}
```

For other data types (or crossline-sorted poststack data) it is possible to
specify which trace header fields the file is sorted on by using the
`--primary-key` and `--secondary-key` options. 

  The result of the scanning process is the 'file info' and can optionally be
saved to a separate file using the `--scan` option. Such a file can be used
later when importing the data by using the
`--file-info` command line option.

If `--scan` is specified then `--file-info` argument can be used to specify the
output file. If no output file is given, the file info will be printed to
stdout.

When SEGYImport is either done generating a "file-info" or it is supplied with
a file, it will start generating VDS chunks that will be uploaded to the
destination VDS using the
connection parameters.

During the scanning stage SEGYImport will also read the binary header of the
SEG-Y file and extract some keys at certain predefined positions. These are not
possible to override, since it's not common practice to store these in a
different place.

| Name                           | Offset | Width |
|--------------------------------|--------|-------|
| TracesPerEnsemble              | 13     | 2     |
| AuxiliaryTracesPerEnsemble     | 15     | 2     |
| SampleInterval                 | 17     | 2     |
| NumSamples                     | 21     | 2     |
| DataSampleFormatCode           | 25     | 2     |
| EnsembleFold                   | 27     | 2     |
| TraceSortingCode               | 29     | 2     |
| MeasurementSystem              | 55     | 2     |
| SEGYFormatRevisionNumber       | 301    | 2     |
| FixedLengthTraceFlag           | 303    | 2     |
| ExtendedTextualFileHeaderCount | 305    | 2     |

The default trace header fields (that can be overridden with a header format JSON file) are:

| Header Field Name     | Aliases                                  | Offset | Width |
|-----------------------|------------------------------------------|--------|-------|
| InlineNumber          | Inline                                   | 189    | 4     |
| CrosslineNumber       | Crossline                                | 193    | 4     |
| EnsembleXCoordinate   | CDPXCoordinate, CDP-X, Easting           | 181    | 4     |
| EnsembleYCoordinate   | CDPYCoordinate, CDP-Y, Northing          | 185    | 4     |
| SourceXCoordinate     | Source-X                                 |  73    | 4     |
| SourceYCoordinate     | Source-Y                                 |  77    | 4     |
| GroupXCoordinate      | Group-X, ReceiverXCoordinate, Receiver-X |  81    | 4     |
| GroupYCoordinate      | Group-Y, ReceiverYCoordinate, Receiver-Y |  85    | 4     |
| CoordinateScale       | Scalar                                   |  71    | 2     |

A valid ``--url`` an optional ``--connection`` argument and an
input SEG-Y file must be specified.

Example usage:
```
SEGYImport --url s3://openvds-test --header-format D:\\Datasets\\Australia\\HeaderFormat.json D:\\Datasets\\Australia\\shakespeare3d_pstm_Time.segy
```
